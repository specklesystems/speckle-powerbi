name: build_powerbi
on: 
    push: 
        branches: ["dogukan/rename-data-column"]
jobs:
    build: 
        runs-on: windows-latest
        steps:
            - name: Checkout code
              uses: actions/checkout@v4

    build-visual:
        runs-on: ubuntu-latest
        steps:
        - uses: actions/checkout@v4
        - uses: actions/setup-node@v4
          with:
            node-version: 20
        - run: npm ci
          working-directory: src/powerbi-visual
        - run: npm version 2.12.3 --allow-same-version
          working-directory: src/powerbi-visual
        - run: npm run build
          working-directory: src/powerbi-visual
        - uses: actions/upload-artifact@v4
          with:
            name: powerbi-visual
            path: src/powerbi-visual/dist/*.pbiviz